#User Story 10
#Gerar relatório

#Chamada a facade
#public void generateReport(String login, String begin, String end, String operationType, long idAccount, boolean commitments)

usuario = echo "felipe"
senha = echo "teste"
nome = echo "Joao Felipe"
sexo = echo "M"
email = echo "joaofso@somewhere.com"

tipoCredito = echo "credit"
tipoDebito = echo "debt"
forma = echo "cash"
quantia = echo "10"

#Preparação - Um usuario efetua cadastro, se autentica, cadastra uma conta, insere duas operações (uma na conta default e outra 
#na conta cadastrada), e um compromisso
register login=${usuario}, password=${senha}, name=${nome}, gender=${sexo}, eMail=${email}
doLogin login=${usuario}, password=${senha}
expect true isLogged login=${usuario}
expect "Joao Felipe" getUserName login=${usuario}
expect "M" getUserGender login=${usuario}
expect "joaofso@somewhere.com" getUserEmail login=${usuario}
op1Id = addOperationIntoDefaultAccount ${usuario} ${tipoCredito} ${forma} ${quantia}
acc1 = createAccount ${usuario}, "Conta Banco do Brasil", "1591-1", "12856-2" 
op2Id=addOperation ${usuario}, ${acc1}, ${tipoDebito}, ${forma}, ${quantia}
addCommitment login=${usuario}, label="Financiamento", date="15/04/2009", amount=450, type="debt", frequency="monthly"

#Cenário 1 - O usuário pede um relatorio de todas as suas movimentacoes, apenas da conta default entre o dia 1/11/2008 até 31/03/2009
generateReport login=${usuario}, begin="1/11/2008", end="31/03/2009", operationType="", idAccount=${op1Id}, commitments=false
expect 1 getNumberOfOperationsReport
expect 1 getNumberOfCreditOperationsReport
expect 0 getNumberOfDebtOperationsReport
expect 0 getNumberOfCommitmentsReport

#Cenário 2 - O usuário pede o relatorio de todas as suas movimentações de todas as contas, entre o dia 1/11/2008 até 31/03/2009
generateReport login=${usuario}, begin="1/11/2008", end="31/03/2009", operationType="", idAccount="-1", commitments=false
expect 2 getNumberOfOperationsReport
expect 1 getNumberOfCreditOperationsReport
expect 1 getNumberOfDebtOperationsReport
expect 0 getNumberOfCommitmentsReport

#Cenário 3 - O usuário pede o relatório apenas das operações de crédito de todas as contas juntamente com os compromissos agendados
generateReport login=${usuario}, begin="", end="", operationType="credit", idAccount="-1", commitments=true
expect 1 getNumberOfOperationsReport
expect 1 getNumberOfCreditOperationsReport
expect 0 getNumberOfDebtOperationsReport
expect 1 getNumberOfCommitmentsReport

#Cenário 4 - O usuário pede todas as informações cadastradas no sistema
generateReport login=${usuario}, begin="", end="", operationType="", idAccount="-1", commitments=true
expect 2 getNumberOfOperationsReport
expect 1 getNumberOfCreditOperationsReport
expect 1 getNumberOfDebtOperationsReport
expect 1 getNumberOfCommitmentsReport